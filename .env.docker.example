# ============================================
# NextReleaseMCP - Docker Environment Configuration
# Copy this file to .env and fill in your values
# ============================================

# ============================================
# Node.js API Server Configuration
# ============================================

# Node Environment (development|production)
NODE_ENV=production

# API Server Port
PORT=3000

# Logging Configuration
LOG_LEVEL=info
ENABLE_API_LOGGING=true

# ============================================
# Jira Configuration (REQUIRED)
# ============================================

# Jira Server Base URL
JIRA_BASE_URL=https://jira.sage.com

# Jira API Bearer Token
# Get from: Jira Settings → Personal Access Tokens
JIRA_API_TOKEN=your_jira_bearer_token_here

# Jira Account Email
JIRA_EMAIL=your.email@company.com

# Jira Authentication Type
JIRA_AUTH_TYPE=bearer

# ============================================
# GitHub Configuration (REQUIRED)
# ============================================

# GitHub Personal Access Token
# Get from: GitHub Settings → Developer settings → Personal access tokens
# Required scopes: repo, read:org
GITHUB_TOKEN=ghp_your_github_token_here

# ============================================
# Redis Configuration
# ============================================

# Redis Connection (Docker service name)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# Redis Password (optional - leave empty if not using auth)
REDIS_PASSWORD=

# Redis Memory Configuration
REDIS_MAXMEMORY=256mb
REDIS_POLICY=allkeys-lru

# ============================================
# Cache Configuration
# ============================================

# In-Memory Cache Settings
MEMORY_CACHE_MAX_SIZE=50000
MEMORY_CACHE_TTL=300

# ============================================
# Report Configuration
# ============================================

# Report Output Directory
REPORT_OUTPUT_DIR=./sprint-reports

# Report Template Directory
REPORT_TEMPLATE_DIR=./src/templates

# ============================================
# CORS Configuration
# ============================================

# Allowed origins for CORS (comma-separated)
# Add your production domain if deploying to production
ALLOWED_ORIGINS=http://localhost:3002,http://localhost:80,http://localhost

# ============================================
# API Security (Optional)
# ============================================

# API Keys for authentication (comma-separated)
# Leave empty to disable API key authentication
API_KEYS=

# ============================================
# Web Client Configuration (React + Vite)
# ============================================

# API Base URL for Web Client
# For local development: http://localhost:3000/api
# For production: https://api.yourdomain.com/api
VITE_API_BASE_URL=http://localhost:3000/api

# GitHub Repository for Web Client (Optional)
# Used for GitHub metrics in Analytics page
VITE_GITHUB_OWNER=your-github-org
VITE_GITHUB_REPO=your-repo-name

# ============================================
# Security Configuration
# ============================================

ENABLE_CORS=true
CORS_ORIGIN=*
ENABLE_HELMET=true

# Optional Security Configuration
# RATE_LIMIT_PER_MINUTE=100
# MAX_REQUEST_SIZE=10485760

# ============================================
# Server Configuration (Advanced)
# ============================================

# MCP Server Port (for stdio mode - not typically used in Docker)
MCP_SERVER_PORT=3000
MCP_SERVER_HOST=localhost

# Note: HTTP and SSE server modes (MCP_HTTP_PORT, MCP_SSE_PORT) are
# NOT used in the standard Docker setup. The Docker deployment uses
# the Web API server (Express) which runs on port 3000.

# ============================================
# Docker-Specific Configuration
# ============================================

# External Port Mappings (if you want to change default ports)
# Uncomment and modify in docker-compose.yml:
# API_EXTERNAL_PORT=3000
# WEB_EXTERNAL_PORT=80
# REDIS_EXTERNAL_PORT=6379

# ============================================
# Production-Specific Settings
# ============================================

# For production deployment, consider:
# - Using specific versions instead of 'latest'
# - Enabling Redis password authentication
# - Using environment-specific domains
# - Setting LOG_LEVEL=error for production
# - Disabling API logging (ENABLE_API_LOGGING=false)
# - Using secrets management (Docker Secrets, AWS Secrets Manager, etc.)

# Example Production Settings:
# NODE_ENV=production
# LOG_LEVEL=error
# ENABLE_API_LOGGING=false
# VITE_API_BASE_URL=https://api.yourdomain.com/api
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# REDIS_PASSWORD=your_secure_redis_password

# ============================================
# Notes
# ============================================

# 1. NEVER commit this file with real credentials to version control
# 2. Keep .env files in .gitignore
# 3. Use different .env files for different environments
#    Example: .env.development, .env.staging, .env.production
# 4. For sensitive data in production, use:
#    - Docker Secrets
#    - Kubernetes Secrets
#    - AWS Secrets Manager
#    - Azure Key Vault
#    - HashiCorp Vault

# ============================================
# Quick Setup Guide
# ============================================

# 1. Copy this file:
#    cp .env.docker.example .env

# 2. Edit .env with your credentials:
#    nano .env  (or use your preferred editor)

# 3. Build and start services:
#    docker-compose build
#    docker-compose up -d

# 4. Verify services:
#    docker-compose ps
#    curl http://localhost:3000/api/health
#    curl http://localhost/health

# 5. View logs:
#    docker-compose logs -f

# 6. Access application:
#    Web UI: http://localhost
#    API: http://localhost:3000/api

# For detailed documentation, see: docs/DOCKER_DEPLOYMENT.md
